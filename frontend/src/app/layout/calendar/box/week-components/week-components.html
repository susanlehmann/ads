<!-- <div class="row text-center">
  <div class="col-md-4">
    <div class="btn-group">
      <div class="btn btn-primary" mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate"
        (viewDateChange)="activeDayIsOpen = false">
        Previous
      </div>
      <div class="btn btn-outline-secondary" mwlCalendarToday [(viewDate)]="viewDate">
        Today
      </div>
      <div class="btn btn-primary" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate"
        (viewDateChange)="activeDayIsOpen = false">
        Next
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
  </div>
  <div class="col-md-4">
    <div class="btn-group">
      <div class="btn btn-primary" (click)="view = CalendarView.Month" [class.active]="view === CalendarView.Month">
        Month
      </div>
      <div class="btn btn-primary" (click)="view = CalendarView.Week" [class.active]="view === CalendarView.Week">
        Week
      </div>
      <div class="btn btn-primary" (click)="view = CalendarView.Day" [class.active]="view === CalendarView.Day">
        Day
      </div>
    </div>
  </div>
</div> -->


<div [ngSwitch]="view">
  <mwl-calendar-day-view *ngSwitchCase="'day'" [viewDate]="viewDate" [events]="events" [refresh]="refresh"
    (eventClicked)="eventClicked($event)" (eventTimesChanged)="eventTimesChanged($event)">
  </mwl-calendar-day-view>

  <mwl-calendar-week-view *ngSwitchCase="'week'" [viewDate]="viewDate" [events]="events" [refresh]="refresh"
    [hourSegments]="6" [dayStartHour]="dayStartHour" [dayEndHour]="dayEndHour"
    [hourSegmentTemplate]="hourSegmentTemplate" [headerTemplate]="headerTemplate"
    (eventTimesChanged)="eventTimesChanged($event)" (dayHeaderClicked)="dayHeaderClicked($event)"
    (eventClicked)="eventClicked($event)" (hourSegmentClicked)="hourSegmentClicked($event)"></mwl-calendar-week-view>

</div>


<ng-template #hourSegmentTemplate let-segmentHovered="true" let-segment="segment" let-locale="locale"
  let-segmentHeight="segmentHeight" let-isTimeLabel="isTimeLabel">
  <div (mouseover)="segmentHovered=true" (mouseout)="segmentHovered=false"
    class="cal-hour-segment"
    [style.height.px]="segmentHeight"
    [class.cal-hour-start]="segment.isStart"
    [class.cal-after-hour-start]="!segment.isStart"
    [class.cursor-cell]="!isTimeLabel"
    [ngClass]="segment.cssClass">
    <div class="cal-time" *ngIf="isTimeLabel">
      {{ segment.date | calendarDate:'weekViewHour':locale }}
    </div>
    <div *ngIf="segmentHovered && !isTimeLabel">
      <div> {{segment.date | date: 'shortTime'}}</div>
    </div>
    <div class="now-line" *ngIf="isNow(segment.date)"></div>
  </div>
</ng-template>


<ng-template #headerTemplate let-days="days" let-locale="locale" let-dayHeaderClicked="dayHeaderClicked"
  let-eventDropped="eventDropped">
  <div class="cal-day-headers">
    <div style="cursor: pointer" class="cal-header" *ngFor="let day of days; trackBy:trackByWeekDayHeaderDate"
      [class.cal-past]="day.isPast" [class.cal-today]="day.isToday" [class.cal-future]="day.isFuture"
      [class.cal-weekend]="day.isWeekend" [ngClass]="day.cssClass" (mwlClick)="dayHeaderClicked.emit({day: day})"
      mwlDroppable dragOverClass="cal-drag-over"
      (drop)="eventDropped.emit({event: $event.dropData.event, newStart: day.date})">
      <b>{{ day.date | calendarDate:'weekViewColumnHeader':locale }}</b><br>
      <span>{{ day.date | calendarDate:'weekViewColumnSubHeader':locale }}</span>
    </div>
  </div>
</ng-template>